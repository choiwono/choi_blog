---
layout: page
title: DashBoard
description: 시스템 모니터링
background: '/img/bg-contact.jpg'
---

<script src="https://code.jquery.com/jquery-1.11.3.js"></script>
<link rel="stylesheet" href="{{"/assets/vendor/bootstrap/css/bootstrap.custom.css" | relative_url }}">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
            integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<div class="row col-lg-12 mx-auto">
  {% for system in site.systems %}
    <div class="card col-sm-3 normal m-2 p-3">
        <!-- 필요한 정보 -->
        <!-- 서비스 이름, 서비스 Summary, 담당자, 서비스 상태, 서비스 링크, 썸네일 같은 이미지 
            ( 사용 할지 안할지 모름 ) -->
        <div class="d-flex">
            <h4 class="col-8 p-0">{{ system.name }}</h4>
            <span class="col-4 p-0 text-muted text-right">{{ system.env }}</h4>
        </div>
        <p class="text-muted">{{ system.summary }}</p>
        <span class="hotbit mb-3"></span>
        <div class="d-flex">
            <div class="avatar col-6">
                <div class="name oper">
                    {{ system.oper }}
                </div>
            </div>
            <div class="text-right col-6">
                <button class="btn btn-sm link">
                    <a href="{{ system.link }}" target="_blank">접속</a>
                </button>    
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<script>
    $('.container>.row>.col-lg-8').removeClass('col-lg-8 col-md-10').addClass('col-lg-12')

    function url_check(){
        $('.card').each(function(){
            var $this = $(this);
            let _url = $this.find('a').attr('href');
            
            console.log('URL : ' + _url);
            if(_url){
                
                let _call_url = location.protocol + '//' + location.hostname + ':5000/api/url_check/' + _url;
                
                $.ajax({
                    url: _call_url,
                    type: "GET"
                }).done(function(res) {
                    if(res){
                        $this.addClass('active');
                        $this.find('span.hotbit').addClass('success').text('작동중');
                    }else{
                        $this.addClass('non-active');
                        $this.find('span.hotbit').addClass('error').text('에러');
                    }
                })
                .fail(function() {
                    $this.find('span.hotbit').addClass('error').text('에러');
                });
            }
        });
    }
    
    
    
    url_check();
            </script>
        